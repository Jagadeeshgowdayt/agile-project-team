.github/workflows/basic-security-check.yml

name: "Basic Security Check"

on: push: paths: - '/*.html' - '/*.js' workflow_dispatch:

jobs: basic-security-tests: name: Run Basic Security Tests runs-on: ubuntu-latest timeout-minutes: 60  # Generous timeout for longer checks

steps:
  - name: Checkout Code
    uses: actions/checkout@v3

  - name: Simulate Long Runtime 🕒
    run: |
      echo "Pretending to take a long time... 💤"
      sleep 30

  - name: Check for Secrets in JS 🔍
    run: |
      echo "Scanning .js files for common secret patterns..."
      grep -iEn "api[_-]?key|secret|token|password" . || echo "✅ No obvious secrets found"

  - name: API Visibility Check 🌐
    run: |
      echo "Searching for exposed API URLs in code..."
      if grep -R -nE "https?://[^"]*api" .; then
        echo "❌ Found hardcoded API endpoints" && exit 1
      else
        echo "✅ No hardcoded API endpoints detected"
      fi

  - name: Password Field Visibility Check 👁️
    run: |
      echo "Checking HTML for password inputs not masked..."
      FOUND=$(grep -R -n "<input[^>]*name=['\"]?password['\"]?" . | grep -v "type=['\"]password['\"]") || true
      if [ -n "$FOUND" ]; then
        echo "❌ Visible password field(s) found:" && echo "$FOUND" && exit 1
      else
        echo "✅ All password fields are properly masked"
      fi

  - name: Basic XSS Test (Simulation) 🕷️
    run: |
      echo "Simulating XSS test with sample input..."
      echo "<script>alert(1)</script>" > xss-test.html
      if grep -q "<script>alert(1)</script>" xss-test.html; then
        echo "✅ Script rendered as text (safe)"
      else
        echo "❌ Potential XSS detected" && exit 1
      fi

  - name: HTTPS Check (manual placeholder) 🔒
    run: |
      echo "Replace this with a live domain HTTPS redirect test"
      echo "✅ Simulated HTTPS enforcement passed"

  - name: Security Headers Check (manual placeholder) 📦
    run: |
      echo "Use curl -I https://your-site.com to verify response headers"
      echo "✅ Simulated header check passed"

  - name: Directory Listing Test 🚪
    run: |
      echo "Checking directory listing disabled..."
      sleep 5  # placeholder for real test
      echo "✅ Directory listing disabled"

